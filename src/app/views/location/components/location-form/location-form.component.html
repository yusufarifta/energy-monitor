<div class="modal-header d-flex justify-content-between align-items-center">
  <h6 class="mb-0">Add Location</h6>
  <fa-icon [icon]="icons.faCircleXmark" (click)="bsModalRef.hide()"></fa-icon>
</div>

<form class="modal-body p-3" [formGroup]="form">
  <div class="row">
    <div class="col-md-4">
      <label for="location_name" class="fw-bolder" style="font-size: 12px">Location Name</label>
      <input type="text" class="form-control" name="location_name" formControlName="location_name">
      <span class="text-danger"
            *ngIf="formControls.location_name.invalid && (formControls.location_name.dirty || formControls.location_name.touched)">Please input location name</span>
    </div>
    <div class="col-md-4">
      <label for="address" class="fw-bolder" style="font-size: 12px">Address</label>
      <textarea type="text" class="form-control" name="address" formControlName="address"></textarea>
      <span class="text-danger"
            *ngIf="formControls.address.invalid && (formControls.address.dirty || formControls.address.touched)">Please input address</span>
    </div>
  </div>
  <div class="row mt-3">

    <div class="col-md-4 mb-2">
      <div class="border border-opacity-50 p-3 rounded">
        <div class="d-flex justify-content-between">
          <p class="fw-bold" style="font-size: 16px">Energy Source 1</p>
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" formControlName="status_1"
                   (change)="toggleChange($event.target, 1)">
          </div>
        </div>

        <ng-container *ngIf="formControls.status_1.value; else disabledButton1">
          <p class="fw-semibold">Type Energy Source</p>
          <div class="d-flex flex-wrap justify-content-between">
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="solar1" value="solar"
                     formControlName="type_energy_source_1">
              <label class="form-check-label ms-2" for="solar">Solar</label>
            </div>
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="grid1" value="grid" formControlName="type_energy_source_1">
              <label class="form-check-label ms-2" for="grid">Grid</label>
            </div>
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="battery1" value="battery"
                     formControlName="type_energy_source_1">
              <label class="form-check-label ms-2" for="battery">Battery</label>
            </div>
          </div>
          <span class="text-danger"
                *ngIf="formControls.type_energy_source_1.invalid && (formControls.type_energy_source_1.dirty || formControls.type_energy_source_1.touched)">Please choose one</span>
          <p class="mt-3 fw-semibold">Serial Number Panel Meter</p>
          <ng-select [items]="serialNumber" placeholder="Select" formControlName="serial_number_1"></ng-select>
          <span class="text-danger" *ngIf="formControls.serial_number_1.invalid && (formControls.serial_number_1.dirty || formControls.serial_number_1.touched)">Please select serial number</span>
        </ng-container>
        <ng-template #disabledButton1>
          <div class="d-flex flex-column justify-content-center align-items-center p-3">
            <img ngSrc="assets/images/disabled-energy.png" height="69" width="69" alt="disabled button image">
            <p class="text-center text-secondary fw-semibold">Activate the toggle above if you want to add an energy source</p>
          </div>
        </ng-template>

      </div>
    </div>

    <div class="col-md-4 mb-2">
      <div class="border border-opacity-50 p-3 rounded ">
        <div class="d-flex justify-content-between">
          <p class="fw-bold" style="font-size: 16px">Energy Source 2</p>
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" formControlName="status_2"
                   (change)="toggleChange($event.target, 2)">
          </div>
        </div>
        <ng-container *ngIf="formControls.status_2.value; else disabledButton2">
          <p class="fw-semibold">Type Energy Source</p>
          <div class="d-flex flex-wrap justify-content-between">
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="solar2" value="solar"
                     formControlName="type_energy_source_2">
              <label class="form-check-label ms-2" for="solar">Solar</label>
            </div>
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="grid2" value="grid" formControlName="type_energy_source_2">
              <label class="form-check-label ms-2" for="grid">Grid</label>
            </div>
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="battery2" value="battery"
                     formControlName="type_energy_source_2">
              <label class="form-check-label ms-2" for="battery">Battery</label>
            </div>
          </div>
          <span class="text-danger"
                *ngIf="formControls.type_energy_source_2.invalid && (formControls.type_energy_source_2.dirty || formControls.type_energy_source_2.touched)">Please choose one</span>
          <p class="mt-3 fw-semibold">Serial Number Panel Meter</p>
          <ng-select [items]="serialNumber" placeholder="Select" formControlName="serial_number_2"></ng-select>
          <span class="text-danger" *ngIf="formControls.serial_number_2.invalid && (formControls.serial_number_2.dirty || formControls.serial_number_2.touched)">Please select serial number</span>
        </ng-container>
        <ng-template #disabledButton2>
          <div class="d-flex flex-column justify-content-center align-items-center p-3">
            <img ngSrc="assets/images/disabled-energy.png" height="69" width="69" alt="disabled button image">
            <p class="text-center text-secondary fw-semibold">Activate the toggle above if you want to add an energy source</p>
          </div>
        </ng-template>
      </div>
    </div>

    <div class="col-md-4 mb-2">
      <div class="border border-opacity-50 p-3 rounded ">
        <div class="d-flex justify-content-between">
          <p class="fw-bold" style="font-size: 16px">Energy Source 3</p>
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" formControlName="status_3"
                   (change)="toggleChange($event.target, 3)">
          </div>
        </div>
        <ng-container *ngIf="formControls.status_3.value; else disabledButton3">
          <p class="fw-semibold">Type Energy Source</p>
          <div class="d-flex flex-wrap justify-content-between">
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="solar3" value="solar"
                     formControlName="type_energy_source_3">
              <label class="form-check-label ms-2" for="solar">Solar</label>
            </div>
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="grid3" value="grid" formControlName="type_energy_source_3">
              <label class="form-check-label ms-2" for="grid">Grid</label>
            </div>
            <div class="form-check d-flex align-items-center">
              <input class="form-check-input" type="radio" id="battery3" value="battery"
                     formControlName="type_energy_source_3">
              <label class="form-check-label ms-2" for="battery">Battery</label>
            </div>
          </div>
          <span class="text-danger" *ngIf="formControls.type_energy_source_3.invalid && (formControls.type_energy_source_3.dirty || formControls.type_energy_source_3.touched)">Please choose one</span>
          <p class="mt-3 fw-semibold">Serial Number Panel Meter</p>
          <ng-select [items]="serialNumber" placeholder="Select" formControlName="serial_number_3"></ng-select>
          <span class="text-danger" *ngIf="formControls.serial_number_3.invalid && (formControls.serial_number_3.dirty || formControls.serial_number_3.touched)">Please select serial number</span>
        </ng-container>
        <ng-template #disabledButton3>
          <div class="d-flex flex-column justify-content-center align-items-center p-3">
            <img ngSrc="assets/images/disabled-energy.png" height="69" width="69" alt="disabled button image">
            <p class="text-center text-secondary fw-semibold">Activate the toggle above if you want to add an energy source</p>
          </div>
        </ng-template>
      </div>
    </div>


  </div>
</form>

<div class="modal-footer d-flex justify-content-end">
  <button class="btn btn-outline-dark rounded-pill px-5" (click)="bsModalRef.hide()">Exit</button>
  <button class="btn btn-dark rounded-pill px-4" (click)="submit()" [disabled]="isLoading">
    {{isLoading ? 'Loading' : 'Add Location'}}
  </button>
</div>
